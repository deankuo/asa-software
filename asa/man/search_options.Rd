% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/s3_methods.R
\name{search_options}
\alias{search_options}
\title{Create Search Options}
\usage{
search_options(
  max_results = NULL,
  timeout = NULL,
  max_retries = NULL,
  retry_delay = NULL,
  backoff_multiplier = NULL,
  inter_search_delay = NULL,
  allow_read_webpages = NULL,
  webpage_relevance_mode = NULL,
  webpage_embedding_provider = NULL,
  webpage_embedding_model = NULL,
  webpage_timeout = NULL,
  webpage_max_bytes = NULL,
  webpage_max_chars = NULL,
  webpage_max_chunks = NULL,
  webpage_chunk_chars = NULL,
  webpage_embedding_api_base = NULL,
  webpage_prefilter_k = NULL,
  webpage_use_mmr = NULL,
  webpage_mmr_lambda = NULL,
  webpage_cache_enabled = NULL,
  webpage_cache_max_entries = NULL,
  webpage_cache_max_text_chars = NULL,
  webpage_user_agent = NULL
)
}
\arguments{
\item{max_results}{Maximum number of search results to return per query.
Higher values provide more context but increase latency. Default: 10.}

\item{timeout}{Timeout in seconds for individual search requests.
Applies to each tier attempt separately. Default: 15.}

\item{max_retries}{Maximum number of retry attempts when a search tier fails.
After exhausting retries, the system falls back to the next tier. Default: 3.}

\item{retry_delay}{Initial delay in seconds before the first retry.
Subsequent retries use exponential backoff. Default: 2.}

\item{backoff_multiplier}{Multiplier for exponential backoff between retries.
E.g., with retry_delay=2 and multiplier=1.5, delays are 2s, 3s, 4.5s. Default: 1.5.}

\item{inter_search_delay}{Minimum delay in seconds between consecutive searches.
Helps avoid rate limiting from search providers. Default: 1.5.}

\item{allow_read_webpages}{If TRUE, allows the agent to open and read full
webpages (HTML/text) via the OpenWebpage tool. Disabled by default.}

\item{webpage_relevance_mode}{Relevance selection for opened webpages.
One of: "auto", "lexical", "embeddings".}

\item{webpage_embedding_provider}{Embedding provider for relevance. One of:
"auto", "openai", "sentence_transformers".}

\item{webpage_embedding_model}{Embedding model identifier for relevance.}

\item{webpage_timeout}{Timeout in seconds for OpenWebpage fetches and (when
used) relevance embeddings.}

\item{webpage_max_bytes}{Maximum bytes to download per page (hard cap).}

\item{webpage_max_chars}{Maximum characters returned from an opened page
(hard cap on tool output).}

\item{webpage_max_chunks}{Maximum number of relevant excerpts to include from
a page.}

\item{webpage_chunk_chars}{Approximate size (in characters) of each excerpt.}

\item{webpage_embedding_api_base}{Optional OpenAI-compatible base URL for
embeddings. If NULL, uses \code{OPENAI_API_BASE} or
\code{https://api.openai.com/v1}.}

\item{webpage_prefilter_k}{Optional lexical prefilter size before embedding
relevance selection.}

\item{webpage_use_mmr}{Whether to apply maximal marginal relevance (MMR) for
more diverse excerpts.}

\item{webpage_mmr_lambda}{MMR tradeoff between relevance (1.0) and diversity (0.0).}

\item{webpage_cache_enabled}{Enable per-run caching of opened pages.}

\item{webpage_cache_max_entries}{Max cached page entries per run.}

\item{webpage_cache_max_text_chars}{Max characters of extracted page text to
store per cached page (separate from \code{webpage_max_chars}, which caps
tool output).}

\item{webpage_user_agent}{User-Agent string used for webpage fetches.}
}
\value{
An object of class \code{asa_search}
}
\description{
Creates search configuration for controlling DuckDuckGo search behavior,
including rate limiting, retry policies, and result limits. These options
are used by the 4-tier search fallback system.
}
\details{
The search system uses a 4-tier fallback architecture:
\enumerate{
  \item \strong{PRIMP}: HTTP/2 with browser TLS fingerprint
  \item \strong{Selenium}: Headless browser for JS-rendered content
  \item \strong{DDGS}: Standard ddgs Python library
  \item \strong{Requests}: Raw POST to DuckDuckGo HTML endpoint
}

The retry/backoff settings apply within each tier. If all retries
are exhausted, the system automatically falls back to the next tier.
}
\examples{
\dontrun{
# Default settings
search <- search_options()

# More aggressive settings for faster searches
search <- search_options(
  max_results = 5,
  timeout = 10,
  max_retries = 2
)

# Conservative settings for rate-limited environments
search <- search_options(
  inter_search_delay = 2.0,
  max_retries = 5,
  backoff_multiplier = 2.0
)

# Use with asa_config
config <- asa_config(
  backend = "openai",
  search = search_options(max_results = 15)
)
}

}
\seealso{
\code{\link{asa_config}}, \code{\link{configure_search}}
}
