% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_task.R
\name{run_task}
\alias{run_task}
\title{Run a Structured Task with the Agent}
\usage{
run_task(
  prompt,
  output_format = "text",
  temporal = NULL,
  agent = NULL,
  verbose = FALSE
)
}
\arguments{
\item{prompt}{The task prompt or question for the agent to research}

\item{output_format}{Expected output format. One of: "text" (raw response),
"json" (parse as JSON), or a character vector of field names to extract}

\item{temporal}{Named list for temporal filtering of search results:
\itemize{
  \item time_filter: DuckDuckGo time filter - "d" (day), "w" (week),
    "m" (month), "y" (year)
  \item after: ISO 8601 date (e.g., "2020-01-01") - hint for results
    after this date (added to prompt context)
  \item before: ISO 8601 date (e.g., "2024-01-01") - hint for results
    before this date (added to prompt context)
}}

\item{agent}{An asa_agent object from \code{\link{initialize_agent}}, or
NULL to use the currently initialized agent}

\item{verbose}{Print progress messages (default: FALSE)}
}
\value{
An object of class \code{asa_result} with components:
\itemize{
  \item prompt: The original prompt
  \item message: The agent's response text
  \item parsed: Parsed output (if output_format specified)
  \item raw_output: Full agent trace
  \item elapsed_time: Execution time in minutes
  \item status: "success" or "error"
}
}
\description{
Executes a research task using the AI search agent with a structured prompt
and returns parsed results.
}
\details{
This function provides a high-level interface for running research tasks.
For simple text responses, use \code{output_format = "text"}. For structured
outputs, use \code{output_format = "json"} or specify field names to extract.

When temporal filtering is specified, the search tool's time filter is
temporarily set for this task and restored afterward. Date hints (after/before)
are appended to the prompt to guide the agent's search behavior.
}
\examples{
\dontrun{
# Initialize agent first
agent <- initialize_agent(backend = "openai", model = "gpt-4.1-mini")

# Simple text query
result <- run_task(
  prompt = "What is the capital of France?",
  output_format = "text",
  agent = agent
)
print(result$message)

# JSON structured output
result <- run_task(
  prompt = "Find information about Albert Einstein and return JSON with
            fields: birth_year, death_year, nationality, field_of_study",
  output_format = "json",
  agent = agent
)
print(result$parsed)

# With temporal filtering (past year only)
result <- run_task(
  prompt = "Find recent AI research breakthroughs",
  temporal = list(time_filter = "y"),
  agent = agent
)

# With date range hint
result <- run_task(
  prompt = "Find tech companies founded recently",
  temporal = list(
    time_filter = "y",
    after = "2020-01-01",
    before = "2024-01-01"
  ),
  agent = agent
)
}

}
\seealso{
\code{\link{initialize_agent}}, \code{\link{run_agent}},
  \code{\link{run_task_batch}}, \code{\link{configure_temporal}}
}
